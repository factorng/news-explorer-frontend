(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],[,,,,function(e,t){e.exports={DAYS_TO_SEARCH:7,ARTICLES_TO_SHOW:3,NEWS_API_KEY:"bf7169dab96c48ad8d40d898b911863c",NEWS_API_URL:"https://nomoreparties.co/news/v2/everything?",NEWS_EXPLORER_API_URL:"https://ancient-peak-40824.herokuapp.com",IMAGE_NOT_FOUND:"https://i.pinimg.com/736x/05/64/aa/0564aa6901080b36d98fd5b9ef5be549.jpg"}},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){e.exports=a.p+"static/media/my_foto.c339d7c6.jpg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAABCIB6VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJJSURBVHgBnVWxctpAEL2TMCYRyigzMUhpLHdJxx9Y/oKYMlVMl85Jlw77C8IfYL4A8wdKl9Lp3FlugrDjCZ7BY+MZOL8FneYkBBbeGUZ3e7vv3r7bOxjLabZlufTLG8+XLViw18XioeDcw9RLLftiOu0wXffDMAxyAzvV6iET4ohxbrHnmCHu79XV8UpgYvlqc7ObwfA5O70fjxtDmHRo6ipA2y8AJduPCMWmy8H7SqWJ0r/SWAhxogvRmGIvznlNMBag5AB6n+NrIa6E8TG+DQS/pRikuWa5fDu6u/tNGDMpbNt2kXAhN8HBNMLr6xMakzxqiWmzt7YOuKa1o+kQkuxQ/FyKycRTgxEYH9oq0Ci2pkytUrH4jQZatPhFDUaZpyynIbYFOeLNIctuDMySB9Zb1ptZRrE4g57i8mbApG+CgRBnbE0Dy4RcjuNsaxlx22xdE2IhR0uXHbXOepbK6ff7l5Kxr/hrkMdjOY3aDR9XzkWENQOGrr8SBIToRgkrzalU9lHhz4ST804MXHp8lC1zhvbZwzigpsdjdIEb2V4ArFZbAP0PkG7GQ+XHwAFdArqikAFsm0LT6uSmErHRbSbdjJePrrk8s4J09geDFph8YvM+3MV8Z9l1hnRDSJD0gSlAj+RcVxffbWz0JoXCB6T8eGMYrq7rH03DsPCwnKtxZcPw+PwPIAZ9GI/rDzDpS/QxSQKmdSoJvwMkN5G0vP3m5/I9HAz20pXpWfGj0cgvm2YHOv6h53KBsWmSxpdg+fnfzY2fhfEEmoDzY5hKFZwAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACoSURBVHgB7ZPdDYMwDISPqgOwQekGGYFuUjZgBJiAkWATsgEjQCKMZAyCBPmBB0462bKcL/8A0DqPSm4TStT0grKuAGvnr3NC/smGmDMqdybIRE8wrBeglGA573sjXFbAeoorxZyhZbnZg8UCgxTyDgvMq1vs5VdnKPex4QPOLuODY/15v8aWM1k4/Z/kio0xrD4g8tnkFC2rpay+0i3+8gPcAjvoqZsA7IpYR1MRXSkAAAAASUVORK5CYII="},,,,function(e,t,a){e.exports=a(50)},,,,,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),l=a(5),s=(a(33),a(1)),i=a(2),u=r.a.createContext();a(34);var m=function(e){var t=e.handleMobileOpen,a=e.popupAuthOpen,n=e.handleLogOut,o=Object(i.h)().pathname,c=r.a.useContext(u);return r.a.createElement("div",{className:"/news-explorer-frontend/saved-news"===o?"header header_black":"header"},r.a.createElement("p",{className:"header__logo"}," NewsExplorer "),r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"header__menu"},r.a.createElement("li",null,r.a.createElement(l.b,{exact:!0,to:"/",className:"/news-explorer-frontend/saved-news"===o?"header__menu-item header__menu-item_black":"header__menu-item",activeClassName:"/news-explorer-frontend/saved-news"===o?"header__menu-item_underlined header__menu-item_underlined_black":"header__menu-item_underlined"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),c.name?r.a.createElement("li",null,r.a.createElement(l.b,{to:"/news-explorer-frontend/saved-news",className:"/news-explorer-frontend/saved-news"===o?"header__menu-item header__menu-item_black":"header__menu-item",activeClassName:"/news-explorer-frontend/saved-news"===o?"header__menu-item_underlined header__menu-item_underlined_black":"header__menu-item_underlined"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438")):""),r.a.createElement("button",{className:"/news-explorer-frontend/saved-news"===o?"header__login-button header__login-button_black":"header__login-button",onClick:c.name?n:a},c.name||"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",r.a.createElement("span",{className:"/news-explorer-frontend/saved-news"===o?"header__login-pic header__login-pic_black":"header__login-pic"}))),r.a.createElement("button",{className:"/news-explorer-frontend/saved-news"===o?"header__mobile-menu-button header__mobile-menu-button_black":"header__mobile-menu-button header__mobile-menu-button_white",onClick:t}))};a(40),a(41);var p=function(e){var t=e.handleQuery,a=(e.searchQuery,r.a.useState("")),n=Object(s.a)(a,2),o=n[0],c=n[1];return r.a.createElement("main",{className:"search"},r.a.createElement("section",{className:"search__info"},r.a.createElement("h2",{className:"search__title"},"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432 \u043c\u0438\u0440\u0435?"),r.a.createElement("p",{className:"search__text"},"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435.")),r.a.createElement("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),t(o)}},r.a.createElement("input",{type:"text",className:"search__input",required:!0,onChange:function(e){return c(e.target.value)},value:o||""}),r.a.createElement("button",{className:"search__button",type:"submit"},"\u0418\u0441\u043a\u0430\u0442\u044c")))},d=(a(42),a(22)),_=a.n(d);var h=function(){return r.a.createElement("section",{className:"about"},r.a.createElement("img",{className:"about__image",src:_.a,alt:"\u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0430\u0432\u0442\u043e\u0440\u0430"}),r.a.createElement("section",{className:"about__info"},r.a.createElement("h2",{className:"about__title"},"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"),r.a.createElement("p",{className:"about__text"},"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."),r.a.createElement("p",{className:"about__text"},"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b \u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438 \u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c.")))},f=(a(43),a(23)),E=a.n(f),b=a(24),g=a.n(b);var w=function(){var e=function(){window.scrollTo(0,0)};return r.a.createElement("footer",{className:"footer"},r.a.createElement("section",{className:"footer__copyright"},"\xa9 2020 Supersite, Powered by News API"),r.a.createElement("ul",{className:"footer__menu"},r.a.createElement("li",null,r.a.createElement(l.b,{exact:!0,to:"/news-explorer-frontend/",className:"footer__menu-item",onClick:e},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",null,r.a.createElement(l.b,{exact:!0,to:"/news-explorer-frontend/saved-news",className:"footer__menu-item",onClick:e},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"))),r.a.createElement("section",{className:"footer__social"},r.a.createElement("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer__icon",src:E.a,alt:"\u0438\u043a\u043e\u043d\u043a\u0430 \u0413\u0438\u0442\u0445\u0430\u0431"})),r.a.createElement("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer__icon",src:g.a,alt:"\u0438\u043a\u043e\u043d\u043a\u0430 \u0424\u0435\u0439\u0441\u0431\u0443\u043a"}))))};a(18);var v=function(e){var t=e.article,a=e.handleButton,n=e.savedArticles,o=Object(i.h)().pathname,c=r.a.useContext(u),l=r.a.useState(!1),m=Object(s.a)(l,2),p=m[0],d=m[1];r.a.useEffect((function(){c.name&&n&&d(void 0!==n.find((function(e){return e.title===t.title})))}),[t.title,c,n]);var _="".concat("/saved-news"===o?"news-card__button-delete":c.name?"".concat(p?"news-card__button-bookmark_loggedIn news-card__button-bookmark_marked":"news-card__button-bookmark_loggedIn"):"news-card__button-bookmark"),h="".concat("/saved-news"===o?"news-card__keyword news-card__keyword_active":"news-card__keyword");return r.a.createElement("div",{className:"news-card"},r.a.createElement("p",{className:h},t.keyword),r.a.createElement("button",{className:_,onClick:function(){a(t)}}),r.a.createElement("img",{className:"news-card__image",src:t.urlToImage||t.image,alt:t.title}),r.a.createElement("div",{className:"news-card__info"},r.a.createElement("p",{className:"news-card__date"},function(e){var t=new Date(e);return"".concat(t.toLocaleDateString("ru",{month:"long",day:"numeric"}),", ").concat(t.getFullYear())}(t.publishedAt||t.date)),r.a.createElement("h3",{className:"news-card__header"},t.title),r.a.createElement("p",{className:"news-card__text"},t.description||t.text),r.a.createElement("p",{className:"news-card__source"},t.source.name||t.source)))},A=(a(44),a(4));var N=function(e){var t=e.articles,a=e.handleButton,o=e.savedArticles,c=e.searchQuery,l=Object(n.useState)([]),u=Object(s.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(!1),_=Object(s.a)(d,2),h=_[0],f=_[1],E=Object(i.h)().pathname;return Object(n.useEffect)((function(){p(t.slice(0,A.ARTICLES_TO_SHOW))}),[t]),r.a.createElement(r.a.Fragment,null,c||localStorage.getItem("articles")?r.a.createElement("section",{className:"search-results"},r.a.createElement("h2",{className:"search-results__header"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"),0===t.length?"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.":"",r.a.createElement("div",{className:"news-card-list"},m.map((function(e,t){var n="";return"/saved-news"===E&&(n=e.keyword),r.a.createElement(v,{article:e,key:t,keyword:n,handleButton:a,savedArticles:o})}))),t.length>A.ARTICLES_TO_SHOW?r.a.createElement("button",{className:"search-results__show-more",onClick:function(){p(t.slice(0,m.length+A.ARTICLES_TO_SHOW)),m.length>=t.length-A.ARTICLES_TO_SHOW&&f(!0)},disabled:h},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451"):""):"")};a(19);var O=function(e){var t=e.isOpen,a=e.className,n=e.formName,o=e.onSubmit,c=e.onClose,l=e.title,s=e.children,i=e.buttonText,u=e.onClickBottomButton,m=e.bottomButtonText,p=e.submitEnable;return r.a.createElement("div",{className:t?"popup  ".concat(a," popup_open"):"popup  ".concat(a)},r.a.createElement("h1",{className:"popup__logo"}," NewsExplorer "),r.a.createElement("form",{className:"popup__form ".concat(n),method:"post",action:"#",onSubmit:o,noValidate:!0},r.a.createElement("button",{className:"popup__button-close",type:"button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:c}),r.a.createElement("h3",{className:"popup__title"},l),s,r.a.createElement("button",{className:p?"popup__button-submit":"popup__button-submit popup__button-submit_disabled",disabled:!p,type:"submit"},i),r.a.createElement("p",{className:"popup__bottom-button"},"\u0438\u043b\u0438",r.a.createElement("span",{className:"popup__bottom-button-text",onClick:u},m))))},S=a(11),k=a(12);function y(){var e=r.a.useState({}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=r.a.useState({}),l=Object(s.a)(c,2),i=l[0],u=l[1],m=r.a.useState(!1),p=Object(s.a)(m,2),d=p[0],_=p[1],h=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e),u(t),_(a)}),[o,u,_]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,r=t.value;o(Object(k.a)(Object(k.a)({},a),{},Object(S.a)({},n,r))),u(Object(k.a)(Object(k.a)({},i),{},Object(S.a)({},n,t.validationMessage))),_(t.closest("form").checkValidity())},errors:i,isValid:d,resetForm:h}}var j=function(e){var t=e.isOpen,a=e.onClose,n=e.handlePopupRegisterOpen,o=e.handleLogin,c=y(),l=c.values,s=c.handleChange,i=c.errors,u=c.isValid,m=c.resetForm;function p(){a(),m({email:"",password:""},{},!1)}return r.a.createElement(O,{isOpen:t,onClose:p,title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault();var t=l.email,a=l.password;t&&a&&o(t,a,p)},buttonText:"\u0412\u043e\u0439\u0442\u0438",bottomButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onClickBottomButton:function(){a(),n(!0)},submitEnable:u},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"email",className:"popup__input edit-profile__input-email",type:"email",value:l.email||"",onChange:s,name:"email",minLength:"5",maxLength:"40",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",pattern:"^[^@]+@[^@.]+\\.[^@]+$",required:!0}),r.a.createElement("span",{className:"popup__input-error popup__name-error ".concat(!u&&"popup__input-error_active")},i.email||"")),r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"password",className:"popup__input edit-profile__input-password",type:"password",value:l.password||"",onChange:s,name:"password",minLength:"5",maxLength:"40",placeholder:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0}),r.a.createElement("span",{className:"popup__input-error popup__name-error ".concat(!u&&"popup__input-error_active")},i.password||""))))};var x=function(e){var t=e.isOpen,a=e.onClose,n=e.handlePopupAuthOpen,o=e.handleRegister,c=e.isError,l=y(),s=l.values,i=l.handleChange,u=l.errors,m=l.isValid,p=l.resetForm;return r.a.createElement(O,{isOpen:t,onClose:function(){a(),p({email:"",password:"",name:""},{},!1)},title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault();var t=s.email,a=s.password,n=s.name;t&&a&&n&&o(t,a,n)},buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",bottomButtonText:"\u0412\u043e\u0439\u0442\u0438",onClickBottomButton:function(){a(),n(!0)},submitEnable:m},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"email-registration",className:"popup__input edit-profile__input-email",type:"email",value:s.email||"",onChange:i,name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",minLength:2,maxLength:40,pattern:"^[^@]+@[^@.]+\\.[^@]+$",required:!0}),r.a.createElement("span",{className:"popup__input-error popup__name-error ".concat(!m&&"popup__input-error_active")},u.email||"")),r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"password-registration",className:"popup__input edit-profile__input-password",type:"password",value:s.password||"",onChange:i,name:"password",placeholder:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",minLength:2,maxLength:20,required:!0}),r.a.createElement("span",{className:"popup__input-error popup__name-error ".concat(!m&&"popup__input-error_active")},u.password||"")),r.a.createElement("div",{className:"popup__input-field"},r.a.createElement("input",{id:"name-registration",className:"popup__input edit-profile__input-name",type:"text",value:s.name||"",onChange:i,name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",minLength:2,maxLength:20,required:!0}),r.a.createElement("span",{className:"popup__input-error popup__name-error ".concat(!m&&"popup__input-error_active")},u.name||""),r.a.createElement("span",{className:"popup__error_registration ".concat(c&&"popup__error_registration_active"," ")},"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0435\u0441\u0442\u044c"))))};a(45);var C=function(e){var t=e.savedArticles,a=r.a.useContext(u),n=r.a.useState([]),o=Object(s.a)(n,2),c=o[0],l=o[1];return r.a.useEffect((function(){var e=t.map((function(e){return e.keyword})).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});l(e)}),[t]),r.a.createElement("section",{className:"saved-news-header"},r.a.createElement("div",{className:"saved-news-header__wrapper"},r.a.createElement("h3",{className:"saved-news-header__header"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"),r.a.createElement("h1",{className:"saved-news-header__articles-count"},a.name,", \u0443 \u0432\u0430\u0441 \xa0",t.length," \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439"),r.a.createElement("p",{className:"saved-news-header__keywords"},"\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:\xa0",Object.keys(c).length<=3?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"saved-news-header__keywords-black"},Object.keys(c).map((function(e){return e+" "})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"saved-news-header__keywords-black"},Object.keys(c).slice(0,3).map((function(e){return e+" "}))),"\xa0\u0438\xa0",r.a.createElement("span",{className:"saved-news-header__keywords-black"},Object.keys(c).length-3,function(e){var t="-\u0438 \u0434\u0440\u0443\u0433\u0438\u043c";return e.toString().endsWith("1")&&!e.toString().endsWith("11")?t="-\u043c\u0443 \u0434\u0440\u0443\u0433\u043e\u043c\u0443":(e.toString().endsWith("2")&&!e.toString().endsWith("12")||e.toString().endsWith("3")&&!e.toString().endsWith("13")||e.toString().endsWith("4")&&!e.toString().endsWith("14"))&&(t="-\u043c \u0434\u0440\u0443\u0433\u0438\u043c"),t}(Object.keys(c).length-3))))))};a(46);var I=function(e){e.article;var t=e.handleButton,a=e.savedArticles,n="".concat(a.length>0?"saved-news__container":"");return r.a.createElement("section",{className:"saved-news"},r.a.createElement("div",{className:n},r.a.createElement("div",{className:"news-card-list"},a.map((function(e,a){return r.a.createElement(v,{article:e,key:a,keyword:e.keyword,handleButton:t})})))))};a(47);var L=function(e){var t=e.isOpen,a=e.handleClose,n=e.handlePopupAuthOpen,o=e.handleLogOut,c=Object(i.h)().pathname,s=r.a.useContext(u);return r.a.createElement("div",{className:t?"mobile-menu__overlay  mobile-menu_open":"mobile-menu__overlay"},r.a.createElement("nav",{className:"mobile-menu"},r.a.createElement("div",{className:"mobile-menu__header"},r.a.createElement("h1",{className:"mobile-menu__logo"}," NewsExplorer"),r.a.createElement("button",{className:"mobile-menu__close-button",onClick:a})),r.a.createElement("ul",{className:"mobile-menu__links"},r.a.createElement("li",null,r.a.createElement(l.b,{exact:!0,to:"/news-explorer-frontend/",className:"mobile-menu__link",onClick:a},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",null,r.a.createElement(l.b,{exact:!0,to:"/news-explorer-frontend/saved-news",className:"mobile-menu__link",onClick:a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"))),r.a.createElement("button",{className:"/news-explorer-frontend/saved-news"===c?"mobile-menu__login-button mobile-menu__login-button_black":"mobile-menu__login-button",onClick:s.name?o:function(){n(!0)}},s.name||"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",s.name?r.a.createElement("span",{className:"mobile-menu__login-pic"}):" ")))};a(48);var R=function(){return r.a.createElement("section",{className:"preloader"},r.a.createElement("i",{className:"circle-preloader"}),r.a.createElement("p",{className:"preloader__text"},"\u041f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."))},B=a(25),T=a(26),P=new(function(){function e(t){Object(B.a)(this,e),this.baseUrl=t.url,this.key=t.key}return Object(T.a)(e,[{key:"getNews",value:function(e,t){var a=t.toISOString().slice(0,10);t.setDate(t.getDate()-A.DAYS_TO_SEARCH);var n=t.toISOString().slice(0,10);return fetch("".concat(this.baseUrl,"q=").concat(e,"&from=").concat(n,"&to=").concat(a,"&sortBy=popularity&pageSize=100&language=ru&apiKey=").concat(this.key),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.status))})).catch((function(e){return console.log(e)}))}}]),e}())({url:A.NEWS_API_URL,key:A.NEWS_API_KEY}),D=a(27),W=function(e){var t=e.popupAuthOpen,a=e.component,n=e.header,o=Object(D.a)(e,["popupAuthOpen","component","header"]);return r.a.createElement(i.b,null,(function(){return!0===o.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(n,o)," ",r.a.createElement(a,o)):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{to:"/news-explorer-frontend/"}),t(!0))}))},U=function(){return fetch("".concat(A.NEWS_EXPLORER_API_URL,"/articles"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()}))};a(49);var Y=function(e){var t=e.onOpen,a=e.isOpen,n=e.onClose,o=e.handleButtonCLick;return r.a.useEffect((function(){return t()}),[a]),r.a.createElement("div",{className:a?"popup  popup_open":"popup "},r.a.createElement("div",{className:"info-tooltip"},r.a.createElement("button",{onClick:n,type:"button",className:"popup__button-close"}),r.a.createElement("h3",{className:"popup__title"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!"),r.a.createElement("button",{onClick:function(){return o()},type:"button",className:"info-tooltip__button"},"\u0412\u043e\u0439\u0442\u0438")))};var M=function(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],c=r.a.useState(!1),l=Object(s.a)(c,2),d=l[0],_=l[1],f=r.a.useState(!1),E=Object(s.a)(f,2),b=E[0],g=E[1],v=r.a.useState([]),O=Object(s.a)(v,2),S=O[0],k=O[1],B=r.a.useState(),T=Object(s.a)(B,2),D=T[0],M=T[1],F=r.a.useState(!1),X=Object(s.a)(F,2),G=X[0],H=X[1],Q=Object(n.useState)(!1),V=Object(s.a)(Q,2),Z=V[0],z=V[1],J=Object(n.useState)({}),K=Object(s.a)(J,2),q=K[0],$=K[1],ee=Object(n.useState)([]),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),oe=Object(s.a)(re,2),ce=oe[0],le=oe[1],se=Object(n.useState)(!1),ie=Object(s.a)(se,2),ue=ie[0],me=ie[1],pe=Object(n.useState)([]),de=Object(s.a)(pe,2),_e=(de[0],de[1]),he=Object(i.g)();y().resetForm,Object(n.useEffect)((function(){ge()}),[]),Object(n.useEffect)((function(){D&&(H(!0),localStorage.removeItem("articles"),localStorage.removeItem("keyword"),P.getNews(D,new Date).then((function(e){k(e.articles),Z&&(localStorage.setItem("articles",JSON.stringify(e.articles)),localStorage.setItem("keyword",JSON.stringify(D)))})).then((function(){return H(!1)})))}),[D]),Object(n.useEffect)((function(){Z&&U().then((function(e){ne(e);var t=JSON.parse(localStorage.getItem("articles"));t&&k(t);var a=[];e.map((function(e){return a.push(e.keyword)})),_e(a)}))}),[q,Z]);var fe=function(e){"Escape"===e.key&&be()},Ee=function(e){e.target.classList.contains("popup_open")&&be()};r.a.useEffect((function(){return document.addEventListener("keydown",fe),document.addEventListener("click",Ee),function(){document.removeEventListener("keydown",fe),document.removeEventListener("click",Ee)}}));var be=function(){o(!1),_(!1),me(!1),le(!1)},ge=Object(n.useCallback)((function(){localStorage.getItem("jwt")&&fetch("".concat(A.NEWS_EXPLORER_API_URL,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.json();if(400===e.status)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");if(401===e.status)throw new Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u0430: ".concat(e.status))})).then((function(e){$({email:e.email,name:e.name,id:e._id}),localStorage.setItem("user",JSON.stringify(e))})).then((function(){z(!0),he.push("/")})).catch((function(e){z(!1),console.log(e)}))}),[he]);function we(){localStorage.removeItem("jwt"),localStorage.removeItem("articles"),localStorage.removeItem("user"),localStorage.removeItem("keyword"),he.push("/"),z(!1),k([]),$({}),M("")}function ve(e){(function(e){return fetch("".concat(A.NEWS_EXPLORER_API_URL,"/articles/").concat(e._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})})(e).then((function(){ne(ae.filter((function(t){return t._id!==e._id})))})).catch((function(e){console.log(e.message)}))}return r.a.createElement(u.Provider,{value:q},r.a.createElement("div",{className:"wrapper"},r.a.createElement(m,{handleMobileOpen:function(){g(!0)},popupAuthOpen:o,handleLogOut:we}),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/news-explorer-frontend/"},r.a.createElement(p,{handleQuery:M,searchQuery:D}),G?r.a.createElement(R,null):r.a.createElement(N,{articles:S,handleButton:function(e){if(Z){var t=ae.find((function(t){return t.title===e.title}));t?ve(t):(console.log(e),function(e){var t=e.keyword,a=e.title,n=e.text,r=e.date,o=e.source,c=e.link,l=e.image;fetch("".concat(A.NEWS_EXPLORER_API_URL,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({keyword:t,title:a,text:n,date:r,source:o,link:c,image:l})}).then((function(e){if(200===e.status)return e.json();if(400===e.status)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");if(401===e.status)throw new Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u0430: ".concat(e.status))}))}({image:e.urlToImage||A.IMAGE_NOT_FOUND,date:e.publishedAt,title:e.title,text:e.description,source:e.source.name,keyword:D||localStorage.getItem("keyword"),link:e.url}),U().then((function(e){ne(e)})).catch((function(e){console.log(e.message)})))}else _(!0)},savedArticles:ae,searchQuery:D}),r.a.createElement(h,null)),r.a.createElement(W,{exact:!0,path:"/news-explorer-frontend/saved-news",loggedIn:Z,header:C,component:I,savedArticles:ae,articles:ae,handleButton:ve,popupAuthOpen:o})),r.a.createElement(w,null),r.a.createElement(L,{isOpen:b,handleClose:function(){g(!1)},handlePopupAuthOpen:o,handleLogOut:we}),r.a.createElement(j,{isOpen:a,onClose:be,handlePopupRegisterOpen:_,handleLogin:function(e,t,a){return function(e,t){return fetch("".concat(A.NEWS_EXPLORER_API_URL,"/signin/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},credentials:"same-origin",body:JSON.stringify({email:e,password:t})}).then((function(e){if(e.ok)return e.json();if(400===e.status)throw new Error("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");if(401===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438: ".concat(e.status))}))}(e,t).then((function(e){e&&e.token&&(localStorage.setItem("jwt",e.token),ge(),a())})).catch((function(e){console.log(e),z(!1)}))}}),r.a.createElement(x,{isOpen:d,onClose:be,handleRegister:function(e,t,a){return function(e,t,a){return fetch("".concat(A.NEWS_EXPLORER_API_URL,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:e,password:t,name:a})}).then((function(e){if(e.ok)return e.json();if(409===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d");throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")}))}(e,t,a).then((function(e){le(!0)})).catch((function(e){me(!0),console.log(e)}))},handlePopupAuthOpen:o,isError:ue}),r.a.createElement(Y,{onOpen:function(){_(!1)},isOpen:ce,onClose:be,handleButtonCLick:function(){le(!1),o(!0)}})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(M,null))),document.querySelector("#root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.51248426.chunk.js.map